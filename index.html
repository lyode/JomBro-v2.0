<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>JomBro - Interactive Real-World Game</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">JomBro</div>
        <div class="user-info">
            <div class="user-points" id="userPoints">0 Points</div>
            <div class="user-avatar" id="userAvatar">U</div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="switchTab('challenges')">üéØ Challenges</div>
            <div class="nav-tab" onclick="switchTab('leaderboard')">üèÜ Leaderboard</div>
            <div class="nav-tab" onclick="switchTab('profile')">üë§ Profile</div>
        </div>

        <!-- Challenges Section -->
        <div id="challenges" class="content-section active">
            <div style="text-align: center; margin-bottom: 30px;">
                <button class="btn btn-primary" onclick="openModal('createChallengeModal')" style="margin-right: 10px;">
                    ‚ú® Create Challenge
                </button>
                <button class="btn btn-primary" onclick="openModal('aiChallengeModal')" style="margin-right: 10px; background: linear-gradient(135deg, #9b59b6, #3498db);">
                    ü§ñ AI Challenge
                </button>
                <button class="btn btn-secondary" onclick="openModal('manageChallengesModal')" style="margin-right: 10px;">
                    üìã My Challenges
                </button>
                <button class="btn btn-secondary" onclick="openModal('locationModal')">
                    üìç Location
                </button>
            </div>
            
            <div class="challenges-grid" id="challengesGrid">
                <!-- Challenges will be populated by JavaScript -->
            </div>
        </div>

        <!-- Leaderboard Section -->
        <div id="leaderboard" class="content-section">
            <div class="leaderboard-container">
                <h2 class="leaderboard-title">üèÜ Top Players</h2>
                <div id="leaderboardList">
                    <!-- Leaderboard will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profile" class="content-section">
            <!-- Enhanced Profile Header with Avatar on Left Side -->
            <div class="section">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">U</div>
                    <div class="profile-info">
                        <h2 id="profileName">Player</h2>
                        <p>@<span id="profileUsername">username</span></p>
                        <p id="profileBio">Bio: Tell us about yourself...</p>
                    </div>
                </div>
                
                <!-- Profile Stats -->
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalPoints">0</div>
                        <div class="stat-label">Total Points</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="completedChallenges">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="currentRank">-</div>
                        <div class="stat-label">Rank</div>
                    </div>
                </div>
            </div>
            
            <!-- Profile Information Section (From the profile page) -->
            <div class="section">
                <h2>Profile Information</h2>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" class="form-control" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" class="form-control" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label for="company">Company</label>
                    <input type="text" id="company" class="form-control" placeholder="Enter your company name">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" class="form-control" placeholder="Enter your address">
                </div>
                <div class="form-group">
                    <label for="area">Area</label>
                    <input type="text" id="area" class="form-control" placeholder="Enter your area">
                </div>
                <div class="form-group">
                    <label for="city">City</label>
                    <input type="text" id="city" class="form-control" placeholder="Enter your city">
                </div>
                <div class="form-group">
                    <label for="about">Company Profile</label>
                    <textarea id="about" class="form-control" placeholder="Tell us about your company"></textarea>
                </div>

                <div class="form-group">
                    <label for="media-upload">Upload Image/Video (max 1min, landscape oriented)</label>
                    <div class="upload-area" id="media-upload">
                        <i>üìÅ</i>
                        <p>Click to upload an image or video (max 1min)</p>
                        <p>Or drag and drop files here</p>
                    </div>
                </div>

                <div class="buttons">
                    <button class="ecommerce-button">My E-Commerce 1</button>
                    <button class="ecommerce-button">My E-Commerce 2</button>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" id="saveProfileBtn">Save Profile</button>
                </div>
            </div>
            
            <!-- Recent Challenges Section (Moved to bottom as requested) -->
            <div class="section">
                <h2>RECENT CHALLENGES</h2>
                <div class="challenges" id="userRecentChallenges">
                    <!-- Recent challenges will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Challenge Detail Modal -->
    <div id="challengeModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('challengeModal')">&times;</button>
            <h3 class="modal-title" id="modalChallengeTitle">Challenge Details</h3>
            <div id="modalChallengeContent">
                <!-- Challenge details will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Proof Submission Modal -->
    <div id="proofModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('proofModal')">&times;</button>
            <h3 class="modal-title">Submit Proof</h3>
            <div id="proofSubmissionContent">
                <p>Upload a photo or video as proof of completing this challenge:</p>
                <div class="proof-upload-area" id="proofUploadArea">
                    <div class="upload-icon">üì∏</div>
                    <div class="upload-text">Click to upload or drag & drop</div>
                    <div class="upload-hint">Supports JPG, PNG, MP4 (max 10MB)</div>
                </div>
                <input type="file" id="proofFileInput" accept="image/*,video/*" style="display: none;">
                <img id="proofPreview" class="proof-preview" alt="Preview">
                <video id="proofVideoPreview" class="proof-preview" controls></video>
                <div id="proofMessage"></div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="submitProof()" id="submitProofBtn">
                        Submit Proof
                    </button>
                    <button class="btn btn-secondary" onclick="closeModal('proofModal')">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Challenge Modal -->
    <div id="createChallengeModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeModal('createChallengeModal')">&times;</button>
            <h3 class="modal-title">Create New Challenge</h3>
            <form id="createChallengeForm">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Challenge Title</label>
                    <input type="text" id="challengeTitle" placeholder="Enter an engaging challenge title..." 
                           style="width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem;" required>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Description</label>
                    <textarea id="challengeDescription" placeholder="Describe what participants need to do..." rows="4"
                              style="width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem; resize: vertical;" required></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Category</label>
                        <select id="challengeCategory" style="width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem;" required>
                            <option value="">Select Category</option>
                            <option value="Creative">Creative</option>
                            <option value="Social">Social</option>
                            <option value="Adventure">Adventure</option>
                            <option value="Lifestyle">Lifestyle</option>
                            <option value="Educational">Educational</option>
                            <option value="Fitness">Fitness</option>
                            <option value="Community">Community</option>
                        </select>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Difficulty (1-5)</label>
                        <select id="challengeDifficulty" style="width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem;" required>
                            <option value="">Select Difficulty</option>
                            <option value="1">1 - Very Easy</option>
                            <option value="2">2 - Easy</option>
                            <option value="3">3 - Medium</option>
                            <option value="4">4 - Hard</option>
                            <option value="5">5 - Very Hard</option>
                        </select>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Points Reward</label>
                        <input type="number" id="challengePoints" min="10" max="200" step="10" placeholder="50"
                               style="width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem;" required>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Time Limit</label>
                        <select id="challengeTimeLimit" style="width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem;" required>
                            <option value="">Select Time Limit</option>
                            <option value="1 hour">1 hour</option>
                            <option value="6 hours">6 hours</option>
                            <option value="24 hours">24 hours</option>
                            <option value="48 hours">48 hours</option>
                            <option value="72 hours">72 hours</option>
                            <option value="1 week">1 week</option>
                        </select>
                    </div>
                </div>
                
                <div id="createChallengeMessage"></div>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                        Create Challenge
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('createChallengeModal')">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="scripts.js"></script>
</body>
</html>
