<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REFIT Maintenance Services - From Concept to Completion</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #E8A0BF;
            --primary-dark-pink: #BA5B7D;
            --gradient-pink: linear-gradient(135deg, #E8A0BF 0%, #BA5B7D 100%);
            --text-dark: #1a1a1a;
            --text-light: #666;
            --bg-light: #f8f8f8;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        /* Dark mode variables */
        [data-theme="dark"] {
            --text-dark: #ffffff;
            --text-light: #cccccc;
            --bg-light: #1a1a1a;
            --white: #2a2a2a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-dark);
            background-color: var(--bg-light);
            transition: var(--transition);
            overflow-x: hidden;
        }

        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--white);
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: var(--transition);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-family: 'Abril Fatface', cursive;
            font-size: 2.5rem;
            background: var(--gradient-pink);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-pink);
            transition: var(--transition);
        }

        .nav-menu a:hover::after {
            width: 100%;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .theme-toggle, .lang-toggle, .login-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            color: var(--text-dark);
            transition: var(--transition);
        }

        .login-btn {
            background: var(--gradient-pink);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--text-dark);
            margin: 3px 0;
            transition: var(--transition);
        }

        /* Hero Section */
        .hero {
            margin-top: 80px;
            min-height: 90vh;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, rgba(232, 160, 191, 0.1) 0%, rgba(186, 91, 125, 0.1) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 5%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
        }

        .hero-text .tagline {
            font-size: 1.5rem;
            color: var(--primary-dark-pink);
            font-weight: 600;
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .hero-text p {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease 0.4s both;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            animation: fadeInUp 0.8s ease 0.6s both;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--gradient-pink);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-dark-pink);
            border: 2px solid var(--primary-dark-pink);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .hero-image {
            position: relative;
            animation: fadeIn 1s ease 0.8s both;
        }

        .hero-image img {
            width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
        }

        /* Section Styles */
        section {
            padding: 5rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--gradient-pink);
            border-radius: 2px;
        }

        /* Mission & Vision */
        .mission-vision {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 5rem;
        }

        .mv-card {
            background: var(--white);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .mv-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .mv-card h3 {
            font-size: 2rem;
            color: var(--primary-dark-pink);
            margin-bottom: 1.5rem;
        }

        /* Values Grid */
        .values-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .value-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .value-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .value-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: white;
        }

        .value-card h4 {
            font-size: 1.5rem;
            color: var(--primary-dark-pink);
            margin-bottom: 1rem;
        }

        /* Services */
        .services-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .service-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .service-image {
            height: 200px;
            background: var(--gradient-pink);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
        }

        .service-content {
            padding: 2rem;
        }

        .service-content h4 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--primary-dark-pink);
        }

        /* Process Steps */
        .process-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
            position: relative;
        }

        .process-step {
            text-align: center;
            position: relative;
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: var(--gradient-pink);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 1.5rem;
        }

        .process-step h4 {
            font-size: 1.3rem;
            color: var(--primary-dark-pink);
            margin-bottom: 1rem;
        }

        /* Portfolio Gallery */
        .portfolio-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1.5rem;
            background: none;
            border: 2px solid var(--primary-dark-pink);
            color: var(--primary-dark-pink);
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: var(--gradient-pink);
            color: white;
            border-color: transparent;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .portfolio-item {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
        }

        .portfolio-item:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .portfolio-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: var(--transition);
        }

        .portfolio-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(186, 91, 125, 0.9), transparent);
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
            opacity: 0;
            transition: var(--transition);
        }

        .portfolio-item:hover .portfolio-overlay {
            opacity: 1;
        }

        .portfolio-info h4 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .portfolio-info p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
        }

        /* Get Quote Section */
        .quote-section {
            background: linear-gradient(135deg, rgba(232, 160, 191, 0.1) 0%, rgba(186, 91, 125, 0.1) 100%);
            border-radius: 30px;
            padding: 4rem;
            margin-top: 5rem;
        }

        .quote-form {
            max-width: 800px;
            margin: 0 auto;
        }

        .form-step {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .form-step.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--white);
            color: var(--text-dark);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-pink);
        }

        .upload-area {
            border: 2px dashed var(--primary-pink);
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: rgba(232, 160, 191, 0.1);
        }

        .upload-area:hover {
            background: rgba(232, 160, 191, 0.2);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary-pink);
            margin-bottom: 1rem;
        }

        .room-options,
        .style-options,
        .color-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .option-card {
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: var(--white);
        }

        .option-card:hover,
        .option-card.selected {
            border-color: var(--primary-pink);
            background: rgba(232, 160, 191, 0.1);
        }

        .option-card.selected {
            border-width: 3px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3rem;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: -1;
        }

        .progress-step {
            width: 30px;
            height: 30px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            color: #999;
            transition: var(--transition);
        }

        .progress-step.active {
            background: var(--gradient-pink);
            color: white;
        }

        .progress-step.completed {
            background: var(--primary-dark-pink);
            color: white;
        }

        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .budget-display {
            background: var(--white);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .budget-amount {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-dark-pink);
            margin: 1rem 0;
        }

        /* Footer */
        footer {
            background: var(--text-dark);
            color: white;
            padding: 3rem 5%;
            margin-top: 5rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--primary-pink);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: #ccc;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-section a:hover {
            color: var(--primary-pink);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--gradient-pink);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            padding: 2rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: slideUp 0.3s ease;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--text-dark);
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 80px;
            right: -400px;
            width: 400px;
            height: calc(100vh - 80px);
            background: var(--white);
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            z-index: 999;
            overflow-y: auto;
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-header {
            background: var(--gradient-pink);
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-section {
            padding: 1.5rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .admin-section h4 {
            margin-bottom: 1rem;
            color: var(--primary-dark-pink);
        }

        .color-picker {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: var(--transition);
        }

        .color-option.selected {
            border-color: var(--text-dark);
        }

        /* Media Upload Styles */
        .media-upload-container {
            position: relative;
            margin: 1rem 0;
        }

        .media-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .media-preview-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            background: var(--white);
            animation: fadeIn 0.3s ease;
        }

        .media-preview-item img,
        .media-preview-item video {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .media-remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #ff4444;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
        }

        .media-remove-btn:hover {
            background: #ff4444;
            color: white;
        }

        /* Image Slider */
        .image-slider {
            position: relative;
            width: 100%;
            height: 500px;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
        }

        .slider-container {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            position: relative;
        }

        .slide img,
        .slide video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .slider-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: var(--transition);
        }

        .slider-dot.active {
            background: white;
            transform: scale(1.2);
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slider-nav:hover {
            background: white;
            box-shadow: var(--shadow);
        }

        .slider-nav.prev {
            left: 20px;
        }

        .slider-nav.next {
            right: 20px;
        }

        /* Drag and Drop */
        .upload-area.dragging {
            background: rgba(232, 160, 191, 0.3);
            border-color: var(--primary-dark-pink);
        }

        .upload-progress {
            margin-top: 1rem;
            display: none;
        }

        .progress-bar-fill {
            height: 6px;
            background: var(--gradient-pink);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .upload-status {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Video Player Custom Styles */
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .video-container video,
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Gallery Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            cursor: pointer;
        }

        .lightbox.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .lightbox-content img,
        .lightbox-content video {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 40px;
            color: white;
            font-size: 3rem;
            cursor: pointer;
            z-index: 3001;
        }

        /* Media Gallery Grid */
        .media-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .gallery-item img,
        .gallery-item video {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .gallery-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition);
        }

        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
        }

        .gallery-play-btn {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--text-dark);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Portfolio Management Styles */
        .portfolio-manager {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2500;
            display: none;
            overflow-y: auto;
        }

        .portfolio-manager.active {
            display: block;
        }

        .portfolio-manager-content {
            background: var(--white);
            max-width: 1200px;
            margin: 50px auto;
            border-radius: 20px;
            padding: 2rem;
            position: relative;
        }

        .portfolio-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .portfolio-tab {
            padding: 1rem 2rem;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            position: relative;
        }

        .portfolio-tab.active {
            color: var(--primary-dark-pink);
        }

        .portfolio-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-pink);
        }

        .portfolio-upload-zone {
            border: 3px dashed var(--primary-pink);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            margin-bottom: 2rem;
            background: rgba(232, 160, 191, 0.05);
            transition: var(--transition);
        }

        .portfolio-upload-zone.dragging {
            background: rgba(232, 160, 191, 0.2);
            transform: scale(1.02);
        }

        .portfolio-items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .portfolio-edit-item {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            background: var(--white);
            transition: var(--transition);
        }

        .portfolio-edit-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .portfolio-edit-item img,
        .portfolio-edit-item video {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .portfolio-item-info {
            padding: 1rem;
        }

        .portfolio-item-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .portfolio-item-actions button {
            flex: 1;
            padding: 0.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .edit-btn {
            background: #4ecdc4;
            color: white;
        }

        .delete-btn {
            background: #ff6b6b;
            color: white;
        }

        .portfolio-item-actions button:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        /* Animation Support */
        .animation-preview {
            position: relative;
            overflow: hidden;
        }

        .animation-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--gradient-pink);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Slide Gallery */
        .portfolio-slide-gallery {
            position: relative;
            height: 400px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .portfolio-slides {
            display: flex;
            height: 100%;
            transition: transform 0.5s ease;
        }

        .portfolio-slide {
            min-width: 100%;
            height: 100%;
        }

        .portfolio-slide img,
        .portfolio-slide video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .portfolio-thumbnails {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .portfolio-thumbnail {
            min-width: 80px;
            height: 60px;
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.6;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .portfolio-thumbnail.active {
            opacity: 1;
            border-color: var(--primary-pink);
        }

        .portfolio-thumbnail:hover {
            opacity: 1;
        }

        .portfolio-thumbnail img,
        .portfolio-thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Batch Upload Progress */
        .batch-upload-container {
            margin: 2rem 0;
            display: none;
        }

        .batch-upload-container.active {
            display: block;
        }

        .upload-item-progress {
            background: var(--white);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            box-shadow: var(--shadow);
        }

        .upload-item-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .upload-item-name {
            font-weight: 500;
            color: var(--text-dark);
        }

        .upload-item-status {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .upload-item-progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .upload-item-progress-fill {
            height: 100%;
            background: var(--gradient-pink);
            transition: width 0.3s ease;
        }

        /* Edit Portfolio Item Modal */
        .edit-portfolio-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .edit-portfolio-modal.active {
            display: flex;
        }

        .edit-portfolio-content {
            background: var(--white);
            padding: 2rem;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .media-reorder-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0;
        }

        .media-reorder-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem;
            background: var(--bg-light);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            cursor: move;
            transition: var(--transition);
        }

        .media-reorder-item:hover {
            background: rgba(232, 160, 191, 0.1);
        }

        .media-reorder-item.dragging {
            opacity: 0.5;
        }

        .drag-handle {
            font-size: 1.5rem;
            color: var(--text-light);
        }

        .media-thumb {
            width: 60px;
            height: 60px;
            border-radius: 5px;
            overflow: hidden;
        }

        .media-thumb img,
        .media-thumb video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Portfolio Item Types */
        .portfolio-type-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .media-type-icon {
            font-size: 1rem;
        }

        /* AI Quote Analysis Styles */
        .ai-analysis {
            background: linear-gradient(135deg, rgba(232, 160, 191, 0.1) 0%, rgba(186, 91, 125, 0.1) 100%);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid var(--primary-pink);
        }

        .ai-analysis h4 {
            color: var(--primary-dark-pink);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-thinking {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--text-light);
        }

        .ai-thinking-dots {
            display: flex;
            gap: 0.3rem;
        }

        .ai-thinking-dots span {
            width: 8px;
            height: 8px;
            background: var(--primary-pink);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .ai-thinking-dots span:nth-child(1) { animation-delay: -0.32s; }
        .ai-thinking-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        /* Invoice & Receipt Styles */
        .document-preview {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
        }

        .document-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--primary-pink);
        }

        .document-logo {
            font-family: 'Abril Fatface', cursive;
            font-size: 2rem;
            background: var(--gradient-pink);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .document-type {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        .document-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .document-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
        }

        .document-table th {
            background: var(--gradient-pink);
            color: white;
            padding: 1rem;
            text-align: left;
        }

        .document-table td {
            padding: 1rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .document-total {
            text-align: right;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 2px solid var(--primary-pink);
        }

        .document-total h3 {
            color: var(--primary-dark-pink);
            font-size: 1.5rem;
        }

        /* Payment Gateway Simulation */
        .payment-gateway {
            background: var(--white);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .payment-method {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .payment-method:hover,
        .payment-method.selected {
            border-color: var(--primary-pink);
            background: rgba(232, 160, 191, 0.1);
        }

        .payment-method img {
            height: 40px;
            margin-bottom: 0.5rem;
        }

        .bank-list {
            display: none;
            margin-top: 1rem;
        }

        .bank-list.active {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .bank-option {
            padding: 0.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .bank-option:hover {
            background: var(--bg-light);
        }

        /* Enhanced Service Cards */
        .service-card.interactive {
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .service-card.interactive::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .service-card.interactive:hover::before {
            left: 100%;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--white);
            padding: 1.5rem 2rem;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid #4ecdc4;
        }

        .notification.error {
            border-left: 4px solid #ff6b6b;
        }

        .notification.info {
            border-left: 4px solid var(--primary-pink);
        }

        .notification-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .notification-icon {
            font-size: 1.5rem;
        }

        .notification-close {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--text-light);
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            background: var(--gradient-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            color: white;
            font-size: 1.5rem;
        }

        .chat-button:hover {
            transform: scale(1.1);
        }

        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 450px;
            background: var(--white);
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            display: none;
            flex-direction: column;
        }

        .chat-window.active {
            display: flex;
        }

        .chat-header {
            background: var(--gradient-pink);
            color: white;
            padding: 1rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid #e0e0e0;
        }

        .chat-input input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            outline: none;
        }

        .chat-input button {
            background: var(--gradient-pink);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                position: fixed;
                top: 80px;
                right: -100%;
                width: 100%;
                height: calc(100vh - 80px);
                background: var(--white);
                flex-direction: column;
                padding: 2rem;
                transition: var(--transition);
            }

            .nav-menu.active {
                right: 0;
            }

            .menu-toggle {
                display: flex;
            }

            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }

            .hero-buttons {
                justify-content: center;
            }

            .mission-vision {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .social-links {
                justify-content: center;
            }

            .admin-panel {
                width: 100%;
                right: -100%;
            }

            .portfolio-manager-content {
                margin: 20px;
                padding: 1rem;
            }

            .portfolio-tabs {
                flex-wrap: wrap;
            }

            .portfolio-tab {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }

            .portfolio-items-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 1rem;
            }

            .document-details {
                grid-template-columns: 1fr;
            }

            .payment-methods {
                grid-template-columns: 1fr;
            }

            .chat-window {
                width: calc(100vw - 40px);
                right: -10px;
            }

            .notification {
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }

        /* Print Styles */
        @media print {
            header, footer, .admin-panel {
                display: none;
            }

            body {
                background: white;
                color: black;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-pink);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark-pink);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">refit</div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#process">Process</a></li>
                <li><a href="#portfolio">Portfolio</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="nav-controls">
                <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
                <button class="lang-toggle" onclick="toggleLanguage()">EN</button>
                <button class="login-btn" onclick="showLoginModal()">Login</button>
                <div class="menu-toggle" onclick="toggleMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <div class="hero-text">
                <h1>FROM CONCEPT TO COMPLETION</h1>
                <p class="tagline">WE GROW WITH PASSION, WE DO IT ALL</p>
                <p>Professional maintenance, interior construction & renovation services delivered with innovation and excellence.</p>
                <div class="hero-buttons">
                    <a href="#quote" class="btn btn-primary">Get Quote</a>
                    <a href="#portfolio" class="btn btn-secondary">View Portfolio</a>
                </div>
            </div>
            <div class="hero-image">
                <div class="image-slider" id="heroSlider">
                    <div class="slider-container" id="heroSliderContainer">
                        <div class="slide">
                            <img src="https://via.placeholder.com/600x400/E8A0BF/ffffff?text=REFIT+Services" alt="REFIT Services">
                        </div>
                    </div>
                    <button class="slider-nav prev" onclick="changeSlide('hero', -1)" style="display: none;">‹</button>
                    <button class="slider-nav next" onclick="changeSlide('hero', 1)" style="display: none;">›</button>
                    <div class="slider-controls" id="heroSliderDots"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Mission & Vision -->
    <section id="about">
        <h2 class="section-title">Our Mission & Vision</h2>
        <div class="mission-vision">
            <div class="mv-card">
                <h3>Mission</h3>
                <p>To provide responsible and professional quality services as well as components and materials sale, lease, exchange and building management by constantly improving and ensuring business growth.</p>
            </div>
            <div class="mv-card">
                <h3>Vision</h3>
                <p>To gain customer trust and become a leading and competitive business aviation service provider in East and West Malaysia by offering innovative micro solutions team work management.</p>
            </div>
        </div>
    </section>

    <!-- Values -->
    <section>
        <h2 class="section-title">Our Values</h2>
        <div class="values-grid">
            <div class="value-card">
                <div class="value-icon">❤️</div>
                <h4>PASSION</h4>
                <p>Knowledge, experience and constant learning process. Unconditional commitment to work and striving for innovations.</p>
            </div>
            <div class="value-card">
                <div class="value-icon">🛡️</div>
                <h4>RESPONSIBILITY</h4>
                <p>Respectable and honest treatment to clients. Trust-based collaboration with partners. Social responsibility for society and environment.</p>
            </div>
            <div class="value-card">
                <div class="value-icon">💡</div>
                <h4>INNOVATIVE</h4>
                <p>Constant desire to improve. Permanent search for advanced business tools and methods. Innovation is our fundamental competitive advantage.</p>
            </div>
            <div class="value-card">
                <div class="value-icon">🤝</div>
                <h4>RESPECT</h4>
                <p>Recognition that employees are the main reason of a successful business. Development of warm and respectful relationships with associates.</p>
            </div>
        </div>
    </section>

    <!-- Services -->
    <section id="services">
        <h2 class="section-title">What We Do</h2>
        <div class="services-container">
            <div class="service-card interactive">
                <div class="service-image">🔧</div>
                <div class="service-content">
                    <h4>Maintenance Services</h4>
                    <p>Comprehensive maintenance solutions for commercial and residential properties with professional quality and reliability.</p>
                </div>
            </div>
            <div class="service-card interactive">
                <div class="service-image">🏗️</div>
                <div class="service-content">
                    <h4>Interior Construction & Renovation</h4>
                    <p>Expert interior construction and renovation services transforming spaces with innovative design and quality craftsmanship.</p>
                </div>
            </div>
            <div class="service-card interactive">
                <div class="service-image">🎨</div>
                <div class="service-content">
                    <h4>Designing & Interior Illustration</h4>
                    <p>Creative design solutions and detailed interior illustrations bringing your vision to life with professional expertise.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Process -->
    <section id="process">
        <h2 class="section-title">Our Process</h2>
        <div class="process-steps">
            <div class="process-step">
                <div class="step-number">1</div>
                <h4>PLANNING</h4>
                <p>Setting performance objectives & developing decisions on how to achieve them</p>
            </div>
            <div class="process-step">
                <div class="step-number">2</div>
                <h4>ORGANIZING</h4>
                <p>Creating structure: Setting tasks, arranging resources & coordinating activities</p>
            </div>
            <div class="process-step">
                <div class="step-number">3</div>
                <h4>IMPLEMENTING</h4>
                <p>Executing the plans to meet the set performance objectives</p>
            </div>
            <div class="process-step">
                <div class="step-number">4</div>
                <h4>CONTROLLING</h4>
                <p>Measuring performance & taking preventive & corrective actions</p>
            </div>
        </div>
    </section>

    <!-- Portfolio -->
    <section id="portfolio">
        <h2 class="section-title">Our Portfolio</h2>
        <div class="portfolio-filters">
            <button class="filter-btn active" onclick="filterPortfolio('all')">All Projects</button>
            <button class="filter-btn" onclick="filterPortfolio('commercial')">Commercial</button>
            <button class="filter-btn" onclick="filterPortfolio('residential')">Residential</button>
            <button class="filter-btn" onclick="filterPortfolio('maintenance')">Maintenance</button>
            <button class="filter-btn" onclick="filterPortfolio('3d')">3D Concepts</button>
        </div>
        <div class="portfolio-grid" id="portfolioGrid">
            <!-- Portfolio items will be dynamically loaded here -->
        </div>
    </section>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">&times;</span>
        <div class="lightbox-content" id="lightboxContent"></div>
    </div>

    <!-- Get Quote Section -->
    <section id="quote" class="quote-section">
        <h2 class="section-title">Get Your Quote</h2>
        <div class="quote-form">
            <div class="progress-bar">
                <div class="progress-step active">1</div>
                <div class="progress-step">2</div>
                <div class="progress-step">3</div>
                <div class="progress-step">4</div>
                <div class="progress-step">5</div>
            </div>

            <form id="quoteForm">
                <!-- Step 1: Upload Images -->
                <div class="form-step active">
                    <h3>Upload Your Space Images</h3>
                    <div class="upload-area" onclick="document.getElementById('fileInput').click()" id="quoteUploadArea">
                        <div class="upload-icon">📷</div>
                        <p>Click or drag files here to upload</p>
                        <p style="font-size: 0.9rem; color: var(--text-light);">Supports: JPG, PNG, MP4, MOV (Max 50MB each)</p>
                        <input type="file" id="fileInput" multiple accept="image/*,video/*" style="display: none;" onchange="handleFileUpload(event, 'quote')">
                    </div>
                    <div class="upload-progress" id="uploadProgress">
                        <div style="background: #e0e0e0; border-radius: 3px;">
                            <div class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                        <div class="upload-status">Uploading...</div>
                    </div>
                    <div class="media-preview-grid" id="quoteMediaPreview"></div>
                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" disabled>Previous</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
                    </div>
                </div>

                <!-- Step 2: Select Room -->
                <div class="form-step">
                    <h3>Select Room or Area</h3>
                    <div class="room-options">
                        <div class="option-card" onclick="selectOption(this, 'room')">
                            <h4>Living Room</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'room')">
                            <h4>Bedroom</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'room')">
                            <h4>Kitchen</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'room')">
                            <h4>Bathroom</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'room')">
                            <h4>Office</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'room')">
                            <h4>Commercial Space</h4>
                        </div>
                    </div>
                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" onclick="previousStep()">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
                    </div>
                </div>

                <!-- Step 3: Select Style -->
                <div class="form-step">
                    <h3>Select Your Preferred Style</h3>
                    <div class="style-options">
                        <div class="option-card" onclick="selectOption(this, 'style')">
                            <h4>Modern</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'style')">
                            <h4>Contemporary</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'style')">
                            <h4>Minimalist</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'style')">
                            <h4>Industrial</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'style')">
                            <h4>Traditional</h4>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'style')">
                            <h4>Scandinavian</h4>
                        </div>
                    </div>
                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" onclick="previousStep()">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
                    </div>
                </div>

                <!-- Step 4: Select Color Theme -->
                <div class="form-step">
                    <h3>Select Color Theme</h3>
                    <div class="color-options">
                        <div class="option-card" onclick="selectOption(this, 'color')">
                            <h4>Neutral</h4>
                            <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                                <div style="width: 30px; height: 30px; background: #f5f5f5; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #e0e0e0; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #9e9e9e; border-radius: 50%;"></div>
                            </div>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'color')">
                            <h4>Warm</h4>
                            <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                                <div style="width: 30px; height: 30px; background: #ff6b6b; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #ffa94d; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #ffe66d; border-radius: 50%;"></div>
                            </div>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'color')">
                            <h4>Cool</h4>
                            <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                                <div style="width: 30px; height: 30px; background: #4ecdc4; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #45b7d1; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #6c5ce7; border-radius: 50%;"></div>
                            </div>
                        </div>
                        <div class="option-card" onclick="selectOption(this, 'color')">
                            <h4>Monochrome</h4>
                            <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                                <div style="width: 30px; height: 30px; background: #000000; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #666666; border-radius: 50%;"></div>
                                <div style="width: 30px; height: 30px; background: #ffffff; border-radius: 50%; border: 1px solid #ccc;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" onclick="previousStep()">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="generateBudget()">Get Budget</button>
                    </div>
                </div>

                <!-- Step 5: Budget & Confirmation -->
                <div class="form-step">
                    <h3>Your Estimated Budget</h3>
                    <div class="ai-analysis" id="aiAnalysis" style="display: none;">
                        <h4>🤖 AI Analysis</h4>
                        <div class="ai-thinking" id="aiThinking">
                            <span>Analyzing your space...</span>
                            <div class="ai-thinking-dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                        <div id="aiResults" style="display: none;">
                            <p><strong>Space Analysis:</strong></p>
                            <ul id="aiSuggestions"></ul>
                        </div>
                    </div>
                    <div class="budget-display">
                        <p>Based on your selections, the estimated budget is:</p>
                        <div class="budget-amount" id="budgetAmount">RM 15,000 - 25,000</div>
                        <p>This is an initial estimate. Final pricing will be confirmed after site visit.</p>
                    </div>
                    <div class="form-group">
                        <label>Additional Remarks</label>
                        <textarea id="quoteRemarks" rows="4" placeholder="Any specific requirements or notes..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Contact Details</label>
                        <input type="text" id="quoteName" placeholder="Full Name" required>
                        <input type="email" id="quoteEmail" placeholder="Email Address" required style="margin-top: 10px;">
                        <input type="tel" id="quotePhone" placeholder="Phone Number" required style="margin-top: 10px;">
                    </div>
                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" onclick="previousStep()">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="proceedToPayment()">Proceed with 30% Deposit</button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact">
        <h2 class="section-title">Get In Touch</h2>
        <div style="text-align: center; max-width: 600px; margin: 0 auto;">
            <p style="font-size: 1.1rem; margin-bottom: 2rem;">Ready to transform your space? Contact us today!</p>
            <div style="margin-bottom: 2rem;">
                <p><strong>Address:</strong> C-08-34, Centum @ Oasis Corporate Park, Oasis Damansara, No.2 Jalan PJU 1A/2, Ara Damansara, 47301 Petaling Jaya, Selangor, Malaysia.</p>
            </div>
            <div class="social-links" style="justify-content: center;">
                <a href="https://www.instagram.com/refit_mntserv?igsh=dHloODZta3VsZWRy&utm_source=qr" target="_blank">📷</a>
                <a href="https://www.facebook.com/share/19C5RB3hAL/?mibextid=wwXIfr" target="_blank">📘</a>
                <a href="https://www.tiktok.com/@refit.mntserv?_t=ZS-8yUVBpC5xm4&_r=1" target="_blank">🎵</a>
            </div>
        </div>
    </section>

    <!-- Portfolio Manager -->
    <div class="portfolio-manager" id="portfolioManager">
        <div class="portfolio-manager-content">
            <span class="modal-close" onclick="closePortfolioManager()" style="font-size: 2rem;">&times;</span>
            <h2 style="margin-bottom: 2rem;">Portfolio Manager</h2>
            
            <div class="portfolio-tabs">
                <button class="portfolio-tab active" onclick="switchPortfolioTab('all')">All Projects</button>
                <button class="portfolio-tab" onclick="switchPortfolioTab('commercial')">Commercial</button>
                <button class="portfolio-tab" onclick="switchPortfolioTab('residential')">Residential</button>
                <button class="portfolio-tab" onclick="switchPortfolioTab('maintenance')">Maintenance</button>
                <button class="portfolio-tab" onclick="switchPortfolioTab('3d')">3D Concepts</button>
            </div>

            <div class="portfolio-upload-zone" id="portfolioUploadZone">
                <div class="upload-icon" style="font-size: 3rem; color: var(--primary-pink);">📁</div>
                <h3>Drop files here or click to upload</h3>
                <p>Supports: Images (JPG, PNG, GIF), Videos (MP4, MOV), Animations (GIF, WebM)</p>
                <p>You can upload multiple files at once</p>
                <input type="file" id="portfolioBatchUpload" multiple accept="image/*,video/*,.gif,.webm" style="display: none;">
            </div>

            <div class="batch-upload-container" id="batchUploadContainer">
                <h4>Uploading Files...</h4>
                <div id="batchUploadProgress"></div>
            </div>

            <div class="portfolio-items-grid" id="portfolioItemsGrid">
                <!-- Portfolio items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Edit Portfolio Item Modal -->
    <div class="edit-portfolio-modal" id="editPortfolioModal">
        <div class="edit-portfolio-content">
            <span class="modal-close" onclick="closeEditModal()">&times;</span>
            <h3>Edit Portfolio Item</h3>
            
            <div class="form-group">
                <label>Project Title</label>
                <input type="text" id="editItemTitle" placeholder="Enter project title">
            </div>

            <div class="form-group">
                <label>Description</label>
                <textarea id="editItemDescription" rows="3" placeholder="Enter project description"></textarea>
            </div>

            <div class="form-group">
                <label>Category</label>
                <select id="editItemCategory">
                    <option value="commercial">Commercial</option>
                    <option value="residential">Residential</option>
                    <option value="maintenance">Maintenance</option>
                    <option value="3d">3D Concepts</option>
                </select>
            </div>

            <div class="form-group">
                <label>Media Order (Drag to reorder)</label>
                <ul class="media-reorder-list" id="mediaReorderList">
                    <!-- Media items for reordering -->
                </ul>
            </div>

            <div class="form-group">
                <label>Add More Media</label>
                <input type="file" id="addMoreMedia" multiple accept="image/*,video/*,.gif,.webm">
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="savePortfolioItem()">Save Changes</button>
                <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="modal-close" onclick="closeModal('paymentModal')">&times;</span>
            <div class="payment-gateway">
                <h2 style="text-align: center; margin-bottom: 1rem;">Payment Gateway</h2>
                <div class="document-preview" id="invoicePreview" style="max-height: 300px; overflow-y: auto;">
                    <div class="document-header">
                        <div>
                            <div class="document-logo">refit</div>
                            <p style="font-size: 0.9rem; color: var(--text-light);">refit maintenance services</p>
                        </div>
                        <div class="document-type">INVOICE</div>
                    </div>
                    <div class="document-details">
                        <div>
                            <h4>Bill To:</h4>
                            <p id="invoiceCustomerName">Customer Name</p>
                            <p id="invoiceCustomerEmail">email@example.com</p>
                            <p id="invoiceCustomerPhone">+60 12-345 6789</p>
                        </div>
                        <div style="text-align: right;">
                            <p><strong>Invoice #:</strong> <span id="invoiceNumber">INV-2024-001</span></p>
                            <p><strong>Date:</strong> <span id="invoiceDate">01/01/2024</span></p>
                            <p><strong>Due Date:</strong> <span id="invoiceDueDate">15/01/2024</span></p>
                        </div>
                    </div>
                    <table class="document-table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Amount (RM)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Interior Design & Renovation Services</td>
                                <td id="serviceAmount">20,000.00</td>
                            </tr>
                            <tr>
                                <td>30% Deposit</td>
                                <td id="depositAmount">6,000.00</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="document-total">
                        <h3>Total Due: RM <span id="totalDue">6,000.00</span></h3>
                    </div>
                </div>
                
                <h3 style="margin: 2rem 0 1rem;">Select Payment Method</h3>
                <div class="payment-methods">
                    <div class="payment-method" onclick="selectPaymentMethod('bank')">
                        <div style="font-size: 2rem;">🏦</div>
                        <p>Online Banking</p>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('card')">
                        <div style="font-size: 2rem;">💳</div>
                        <p>Credit/Debit Card</p>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('ewallet')">
                        <div style="font-size: 2rem;">📱</div>
                        <p>E-Wallet</p>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('transfer')">
                        <div style="font-size: 2rem;">💸</div>
                        <p>Bank Transfer</p>
                    </div>
                </div>
                
                <div class="bank-list" id="bankList">
                    <button class="bank-option" onclick="processPayment('Maybank')">Maybank</button>
                    <button class="bank-option" onclick="processPayment('CIMB')">CIMB Bank</button>
                    <button class="bank-option" onclick="processPayment('Public Bank')">Public Bank</button>
                    <button class="bank-option" onclick="processPayment('RHB')">RHB Bank</button>
                    <button class="bank-option" onclick="processPayment('Hong Leong')">Hong Leong Bank</button>
                    <button class="bank-option" onclick="processPayment('AmBank')">AmBank</button>
                </div>

                <div id="paymentDetails" style="display: none; margin-top: 2rem;">
                    <div class="form-group">
                        <label>Bank Account Details:</label>
                        <div style="background: var(--bg-light); padding: 1rem; border-radius: 10px;">
                            <p><strong>Account Name:</strong> REFIT MAINTENANCE SERVICES</p>
                            <p><strong>Bank:</strong> RHB Bank</p>
                            <p><strong>Account Number:</strong> 21261100023558</p>
                            <p><strong>Amount:</strong> RM <span id="paymentAmount">6,000.00</span></p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Upload Payment Proof</label>
                        <input type="file" id="paymentProof" accept="image/*,.pdf">
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="confirmPayment()">Confirm Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="modal" id="receiptModal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="modal-close" onclick="closeModal('receiptModal')">&times;</span>
            <div class="document-preview">
                <div class="document-header">
                    <div>
                        <div class="document-logo">refit</div>
                        <p style="font-size: 0.9rem; color: var(--text-light);">refit maintenance services</p>
                    </div>
                    <div class="document-type">RECEIPT</div>
                </div>
                <div style="text-align: center; padding: 2rem; background: rgba(78, 205, 196, 0.1); border-radius: 10px; margin: 2rem 0;">
                    <div style="font-size: 3rem; color: #4ecdc4;">✓</div>
                    <h3 style="color: #4ecdc4;">Payment Received</h3>
                    <p>Thank you for your payment!</p>
                </div>
                <div class="document-details">
                    <div>
                        <h4>Received From:</h4>
                        <p id="receiptCustomerName">Customer Name</p>
                        <p id="receiptCustomerEmail">email@example.com</p>
                    </div>
                    <div style="text-align: right;">
                        <p><strong>Receipt #:</strong> <span id="receiptNumber">RCP-2024-001</span></p>
                        <p><strong>Date:</strong> <span id="receiptDate">01/01/2024</span></p>
                        <p><strong>Payment Method:</strong> <span id="receiptPaymentMethod">Online Banking</span></p>
                    </div>
                </div>
                <div class="document-total">
                    <h3>Amount Paid: RM <span id="receiptAmount">6,000.00</span></h3>
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="downloadReceipt()">Download Receipt</button>
                    <button class="btn btn-secondary" onclick="closeModal('receiptModal')">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Widget -->
    <div class="chat-widget">
        <div class="chat-button" onclick="toggleChat()">💬</div>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h4>REFIT Support</h4>
                <span style="cursor: pointer;" onclick="toggleChat()">×</span>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div style="background: var(--bg-light); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                    <p>👋 Welcome to REFIT! How can we help you today?</p>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKeypress(event)">
                <button onclick="sendChatMessage()">Send</button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>REFIT</h4>
                <p>Professional maintenance and renovation services from concept to completion.</p>
                <div class="social-links">
                    <a href="https://www.instagram.com/refit_mntserv?igsh=dHloODZta3VsZWRy&utm_source=qr" target="_blank">📷</a>
                    <a href="https://www.facebook.com/share/19C5RB3hAL/?mibextid=wwXIfr" target="_blank">📘</a>
                    <a href="https://www.tiktok.com/@refit.mntserv?_t=ZS-8yUVBpC5xm4&_r=1" target="_blank">🎵</a>
                </div>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#portfolio">Portfolio</a></li>
                    <li><a href="#quote">Get Quote</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Services</h4>
                <ul>
                    <li><a href="#">Maintenance Services</a></li>
                    <li><a href="#">Interior Construction</a></li>
                    <li><a href="#">Renovation</a></li>
                    <li><a href="#">3D Design</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contact Info</h4>
                <p>C-08-34, Centum @ Oasis Corporate Park<br>
                Oasis Damansara, No.2 Jalan PJU 1A/2<br>
                Ara Damansara, 47301 Petaling Jaya<br>
                Selangor, Malaysia</p>
            </div>
        </div>
        <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #333;">
            <p>&copy; 2024 REFIT Maintenance Services. All rights reserved.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('loginModal')">&times;</span>
            <h2 style="text-align: center; margin-bottom: 2rem;">Login</h2>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                <p style="text-align: center; margin-top: 1rem;">
                    Don't have an account? <a href="#" onclick="showRegisterModal()" style="color: var(--primary-pink);">Register</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('registerModal')">&times;</span>
            <h2 style="text-align: center; margin-bottom: 2rem;">Register</h2>
            <form onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" required>
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Register</button>
                <p style="text-align: center; margin-top: 1rem;">
                    Already have an account? <a href="#" onclick="showLoginModal()" style="color: var(--primary-pink);">Login</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h3>Master Control Panel</h3>
            <span style="cursor: pointer; font-size: 1.5rem;" onclick="closeAdminPanel()">&times;</span>
        </div>
        
        <div class="admin-section">
            <h4>Theme Settings</h4>
            <div class="form-group">
                <label>Primary Color</label>
                <div class="color-picker">
                    <div class="color-option" style="background: #E8A0BF;" onclick="changeThemeColor('#E8A0BF', '#BA5B7D')"></div>
                    <div class="color-option" style="background: #4ecdc4;" onclick="changeThemeColor('#4ecdc4', '#45b7d1')"></div>
                    <div class="color-option" style="background: #ff6b6b;" onclick="changeThemeColor('#ff6b6b', '#ee5a6f')"></div>
                    <div class="color-option" style="background: #6c5ce7;" onclick="changeThemeColor('#6c5ce7', '#5f3dc4')"></div>
                </div>
            </div>
        </div>

        <div class="admin-section">
            <h4>Logo Settings</h4>
            <div class="form-group">
                <label>Logo Text</label>
                <input type="text" id="logoText" value="refit" onchange="updateLogo()">
            </div>
            <div class="form-group">
                <label>Upload Logo Image</label>
                <input type="file" accept="image/*">
            </div>
        </div>

        <div class="admin-section">
            <h4>Content Management</h4>
            <div class="form-group">
                <label>Hero Title</label>
                <input type="text" value="FROM CONCEPT TO COMPLETION" onchange="updateContent('heroTitle', this.value)">
            </div>
            <div class="form-group">
                <label>Tagline</label>
                <input type="text" value="WE GROW WITH PASSION, WE DO IT ALL" onchange="updateContent('tagline', this.value)">
            </div>
        </div>

        <div class="admin-section">
            <h4>Button Settings</h4>
            <div class="form-group">
                <label>Button Style</label>
                <select onchange="updateButtonStyle(this.value)">
                    <option value="rounded">Rounded</option>
                    <option value="square">Square</option>
                    <option value="pill">Pill</option>
                </select>
            </div>
            <div class="form-group">
                <label>Button Animation</label>
                <select onchange="updateButtonAnimation(this.value)">
                    <option value="lift">Lift</option>
                    <option value="scale">Scale</option>
                    <option value="glow">Glow</option>
                    <option value="none">None</option>
                </select>
            </div>
        </div>

        <div class="admin-section">
            <h4>Hero Slider Management</h4>
            <div class="form-group">
                <label>Upload Hero Images/Videos</label>
                <input type="file" id="heroMediaUpload" multiple accept="image/*,video/*" onchange="handleFileUpload(event, 'hero')">
            </div>
            <div class="media-preview-grid" id="heroMediaPreview"></div>
        </div>

        <div class="admin-section">
            <h4>Portfolio Management</h4>
            <button class="btn btn-primary" style="width: 100%;" onclick="openPortfolioManager()">Manage Portfolio</button>
            <div class="form-group" style="margin-top: 1rem;">
                <label>Quick Upload to Portfolio</label>
                <select id="portfolioCategory" style="margin-bottom: 0.5rem;">
                    <option value="commercial">Commercial</option>
                    <option value="residential">Residential</option>
                    <option value="maintenance">Maintenance</option>
                    <option value="3d">3D Concepts</option>
                </select>
                <input type="file" multiple accept="image/*,video/*" onchange="handlePortfolioUpload(event)">
            </div>
        </div>

        <div class="admin-section">
            <h4>Advanced Settings</h4>
            <button class="btn btn-secondary" style="width: 100%; margin-bottom: 10px;">Export Settings</button>
            <button class="btn btn-secondary" style="width: 100%;">Import Settings</button>
        </div>
    </div>

    <script>
        // Global variables
        let currentStep = 1;
        let isAdmin = false;
        let currentLang = 'EN';
        let currentTheme = 'light';
        let uploadedFiles = {
            hero: [],
            portfolio: {},
            quote: []
        };
        let currentSlide = {
            hero: 0
        };

        // Navigation
        function toggleMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        // Theme Toggle
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', currentTheme);
            const themeToggle = document.querySelector('.theme-toggle');
            themeToggle.textContent = currentTheme === 'light' ? '🌙' : '☀️';
        }

        // Language Toggle
        function toggleLanguage() {
            currentLang = currentLang === 'EN' ? 'MY' : 'EN';
            const langToggle = document.querySelector('.lang-toggle');
            langToggle.textContent = currentLang;
            // Add translation logic here
        }

        // Modal Functions
        function showLoginModal() {
            closeModal('registerModal');
            document.getElementById('loginModal').classList.add('active');
        }

        function showRegisterModal() {
            closeModal('loginModal');
            document.getElementById('registerModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Login Handler
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Check for admin credentials
            if (email === 'admin@refitservices.com' && password === 'refit2024master') {
                isAdmin = true;
                document.getElementById('adminPanel').classList.add('active');
                closeModal('loginModal');
                showAdminControls();
            } else {
                // Regular user login
                closeModal('loginModal');
                alert('Login successful!');
            }
        }

        // Register Handler
        function handleRegister(event) {
            event.preventDefault();
            closeModal('registerModal');
            alert('Registration successful! Please login.');
            showLoginModal();
        }

        // Admin Functions
        function showAdminControls() {
            // Add admin edit buttons throughout the page
            const editableElements = document.querySelectorAll('h1, h2, h3, h4, p');
            editableElements.forEach(el => {
                el.style.position = 'relative';
                el.setAttribute('contenteditable', 'true');
                el.style.outline = '2px dashed var(--primary-pink)';
                el.style.outlineOffset = '5px';
            });

            // Load existing media into admin previews
            updateAdminMediaPreviews();
        }

        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('active');
        }

        function changeThemeColor(primary, dark) {
            document.documentElement.style.setProperty('--primary-pink', primary);
            document.documentElement.style.setProperty('--primary-dark-pink', dark);
            document.documentElement.style.setProperty('--gradient-pink', `linear-gradient(135deg, ${primary} 0%, ${dark} 100%)`);
        }

        function updateLogo() {
            const logoText = document.getElementById('logoText').value;
            document.querySelector('.logo').textContent = logoText;
        }

        function updateContent(element, value) {
            // Update specific content elements
            switch(element) {
                case 'heroTitle':
                    document.querySelector('.hero-text h1').textContent = value;
                    break;
                case 'tagline':
                    document.querySelector('.hero-text .tagline').textContent = value;
                    break;
            }
        }

        function updateButtonStyle(style) {
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => {
                btn.style.borderRadius = style === 'square' ? '5px' : style === 'pill' ? '50px' : '30px';
            });
        }

        function updateButtonAnimation(animation) {
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => {
                btn.classList.remove('lift', 'scale', 'glow');
                if (animation !== 'none') {
                    btn.classList.add(animation);
                }
            });
        }

        // File Upload Handler
        function handleFileUpload(event, section) {
            const files = Array.from(event.target.files);
            const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'video/mp4', 'video/quicktime'];
            const maxSize = 50 * 1024 * 1024; // 50MB

            files.forEach(file => {
                if (!validTypes.includes(file.type)) {
                    alert(`Invalid file type: ${file.name}`);
                    return;
                }

                if (file.size > maxSize) {
                    alert(`File too large: ${file.name}`);
                    return;
                }

                // Simulate upload progress
                showUploadProgress();

                const reader = new FileReader();
                reader.onload = function(e) {
                    const mediaItem = {
                        id: Date.now() + Math.random(),
                        name: file.name,
                        type: file.type,
                        url: e.target.result,
                        size: file.size
                    };

                    if (section === 'hero') {
                        uploadedFiles.hero.push(mediaItem);
                        updateHeroSlider();
                        updateAdminMediaPreviews();
                    } else if (section === 'quote') {
                        uploadedFiles.quote.push(mediaItem);
                        displayQuoteMediaPreview();
                    }

                    hideUploadProgress();
                };
                reader.readAsDataURL(file);
            });
        }

        // Portfolio Upload Handler
        function handlePortfolioUpload(event) {
            const files = Array.from(event.target.files);
            const category = document.getElementById('portfolioCategory').value;
            
            if (!uploadedFiles.portfolio[category]) {
                uploadedFiles.portfolio[category] = [];
            }

            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const mediaItem = {
                        id: Date.now() + Math.random(),
                        name: file.name,
                        type: file.type,
                        url: e.target.result,
                        category: category,
                        title: file.name.split('.')[0].replace(/-|_/g, ' ')
                    };

                    uploadedFiles.portfolio[category].push(mediaItem);
                    loadPortfolioItems('all');
                };
                reader.readAsDataURL(file);
            });
        }

        // Upload Progress
        function showUploadProgress() {
            const progress = document.getElementById('uploadProgress');
            if (progress) {
                progress.style.display = 'block';
                let width = 0;
                const interval = setInterval(() => {
                    if (width >= 90) {
                        clearInterval(interval);
                    } else {
                        width += 10;
                        progress.querySelector('.progress-bar-fill').style.width = width + '%';
                    }
                }, 100);
            }
        }

        function hideUploadProgress() {
            const progress = document.getElementById('uploadProgress');
            if (progress) {
                progress.querySelector('.progress-bar-fill').style.width = '100%';
                setTimeout(() => {
                    progress.style.display = 'none';
                    progress.querySelector('.progress-bar-fill').style.width = '0%';
                }, 500);
            }
        }

        // Hero Slider Functions
        function updateHeroSlider() {
            const container = document.getElementById('heroSliderContainer');
            const dotsContainer = document.getElementById('heroSliderDots');
            
            container.innerHTML = '';
            dotsContainer.innerHTML = '';

            if (uploadedFiles.hero.length === 0) {
                container.innerHTML = `
                    <div class="slide">
                        <img src="https://via.placeholder.com/600x400/E8A0BF/ffffff?text=REFIT+Services" alt="REFIT Services">
                    </div>
                `;
                return;
            }

            uploadedFiles.hero.forEach((media, index) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                
                if (media.type.startsWith('image/')) {
                    slide.innerHTML = `<img src="${media.url}" alt="${media.name}">`;
                } else if (media.type.startsWith('video/')) {
                    slide.innerHTML = `<video src="${media.url}" autoplay muted loop></video>`;
                }
                
                container.appendChild(slide);

                // Create dot
                const dot = document.createElement('div');
                dot.className = 'slider-dot' + (index === 0 ? ' active' : '');
                dot.onclick = () => goToSlide('hero', index);
                dotsContainer.appendChild(dot);
            });

            // Show/hide navigation
            const prevBtn = document.querySelector('.slider-nav.prev');
            const nextBtn = document.querySelector('.slider-nav.next');
            if (uploadedFiles.hero.length > 1) {
                prevBtn.style.display = 'flex';
                nextBtn.style.display = 'flex';
            } else {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
            }

            currentSlide.hero = 0;
            updateSliderPosition('hero');
        }

        function changeSlide(slider, direction) {
            const total = uploadedFiles[slider].length;
            currentSlide[slider] = (currentSlide[slider] + direction + total) % total;
            updateSliderPosition(slider);
        }

        function goToSlide(slider, index) {
            currentSlide[slider] = index;
            updateSliderPosition(slider);
        }

        function updateSliderPosition(slider) {
            const container = document.getElementById(slider + 'SliderContainer');
            const dots = document.querySelectorAll(`#${slider}SliderDots .slider-dot`);
            
            container.style.transform = `translateX(-${currentSlide[slider] * 100}%)`;
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide[slider]);
            });
        }

        // Media Preview Functions
        function displayQuoteMediaPreview() {
            const preview = document.getElementById('quoteMediaPreview');
            preview.innerHTML = '';

            uploadedFiles.quote.forEach((media, index) => {
                const item = document.createElement('div');
                item.className = 'media-preview-item';
                
                if (media.type.startsWith('image/')) {
                    item.innerHTML = `
                        <img src="${media.url}" alt="${media.name}" onclick="openLightbox('${media.url}', 'image')">
                        <button class="media-remove-btn" onclick="removeMedia('quote', ${index})">×</button>
                    `;
                } else if (media.type.startsWith('video/')) {
                    item.innerHTML = `
                        <video src="${media.url}" onclick="openLightbox('${media.url}', 'video')"></video>
                        <button class="media-remove-btn" onclick="removeMedia('quote', ${index})">×</button>
                    `;
                }
                
                preview.appendChild(item);
            });

            // Update upload area text
            const uploadArea = document.getElementById('quoteUploadArea');
            if (uploadedFiles.quote.length > 0) {
                uploadArea.querySelector('p').textContent = `${uploadedFiles.quote.length} file(s) uploaded. Click to add more.`;
            }
        }

        function updateAdminMediaPreviews() {
            if (!isAdmin) return;

            const heroPreview = document.getElementById('heroMediaPreview');
            if (heroPreview) {
                heroPreview.innerHTML = '';
                uploadedFiles.hero.forEach((media, index) => {
                    const item = document.createElement('div');
                    item.className = 'media-preview-item';
                    
                    if (media.type.startsWith('image/')) {
                        item.innerHTML = `
                            <img src="${media.url}" alt="${media.name}">
                            <button class="media-remove-btn" onclick="removeMedia('hero', ${index})">×</button>
                        `;
                    } else if (media.type.startsWith('video/')) {
                        item.innerHTML = `
                            <video src="${media.url}"></video>
                            <button class="media-remove-btn" onclick="removeMedia('hero', ${index})">×</button>
                        `;
                    }
                    
                    heroPreview.appendChild(item);
                });
            }
        }

        function removeMedia(section, index) {
            if (section === 'hero') {
                uploadedFiles.hero.splice(index, 1);
                updateHeroSlider();
                updateAdminMediaPreviews();
            } else if (section === 'quote') {
                uploadedFiles.quote.splice(index, 1);
                displayQuoteMediaPreview();
            }
        }

        // Lightbox Functions
        function openLightbox(url, type) {
            const lightbox = document.getElementById('lightbox');
            const content = document.getElementById('lightboxContent');
            
            if (type === 'image') {
                content.innerHTML = `<img src="${url}" alt="Full size image">`;
            } else if (type === 'video') {
                content.innerHTML = `<video src="${url}" controls autoplay></video>`;
            }
            
            lightbox.classList.add('active');
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.getElementById('lightboxContent').innerHTML = '';
        }

        // Portfolio Management Functions
        let currentPortfolioCategory = 'all';
        let currentEditingItem = null;
        let portfolioProjects = {};

        // Quote Form Functions
        function nextStep() {
            const steps = document.querySelectorAll('.form-step');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            if (currentStep < steps.length) {
                steps[currentStep - 1].classList.remove('active');
                progressSteps[currentStep - 1].classList.add('completed');
                currentStep++;
                steps[currentStep - 1].classList.add('active');
                progressSteps[currentStep - 1].classList.add('active');
            }
        }

        function previousStep() {
            const steps = document.querySelectorAll('.form-step');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            if (currentStep > 1) {
                steps[currentStep - 1].classList.remove('active');
                progressSteps[currentStep - 1].classList.remove('active');
                currentStep--;
                steps[currentStep - 1].classList.add('active');
                progressSteps[currentStep - 1].classList.remove('completed');
            }
        }

        function selectOption(element, type) {
            const options = element.parentElement.querySelectorAll('.option-card');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
        }

        function generateBudget() {
            // Show AI analysis
            document.getElementById('aiAnalysis').style.display = 'block';
            
            // Simulate AI thinking
            setTimeout(() => {
                document.getElementById('aiThinking').style.display = 'none';
                document.getElementById('aiResults').style.display = 'block';
                
                // Generate AI suggestions based on selections
                const suggestions = [
                    'Space requires modern lighting fixtures',
                    'Wall treatment recommended for accent areas',
                    'Premium flooring materials suggested',
                    'Custom cabinetry will optimize space'
                ];
                
                const suggestionsList = document.getElementById('aiSuggestions');
                suggestionsList.innerHTML = '';
                suggestions.forEach(suggestion => {
                    const li = document.createElement('li');
                    li.textContent = suggestion;
                    suggestionsList.appendChild(li);
                });
                
                // Calculate dynamic budget based on selections
                const room = document.querySelector('.room-options .selected')?.textContent || 'Living Room';
                const style = document.querySelector('.style-options .selected')?.textContent || 'Modern';
                
                let minBudget = 15000;
                let maxBudget = 25000;
                
                // Adjust based on room type
                if (room.includes('Kitchen')) {
                    minBudget += 5000;
                    maxBudget += 8000;
                }
                if (room.includes('Commercial')) {
                    minBudget += 10000;
                    maxBudget += 15000;
                }
                
                // Adjust based on style
                if (style.includes('Luxury') || style.includes('Contemporary')) {
                    minBudget += 3000;
                    maxBudget += 5000;
                }
                
                document.getElementById('budgetAmount').textContent = 
                    `RM ${minBudget.toLocaleString()} - ${maxBudget.toLocaleString()}`;
                
                showNotification('AI analysis complete! Budget estimated.', 'success');
            }, 3000);
            
            nextStep();
        }

        function proceedToPayment() {
            // Validate form fields
            const name = document.getElementById('quoteName').value;
            const email = document.getElementById('quoteEmail').value;
            const phone = document.getElementById('quotePhone').value;
            
            if (!name || !email || !phone) {
                showNotification('Please fill in all contact details.', 'error');
                return;
            }
            
            // Generate invoice details
            const invoiceData = {
                customerName: name,
                customerEmail: email,
                customerPhone: phone,
                invoiceNumber: 'INV-' + new Date().getFullYear() + '-' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'),
                date: new Date().toLocaleDateString(),
                dueDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toLocaleDateString(),
                amount: document.getElementById('budgetAmount').textContent.split('-')[1].trim().replace(/[^0-9]/g, ''),
                deposit: 0
            };
            
            invoiceData.deposit = Math.round(parseInt(invoiceData.amount) * 0.3);
            
            // Update invoice preview
            document.getElementById('invoiceCustomerName').textContent = invoiceData.customerName;
            document.getElementById('invoiceCustomerEmail').textContent = invoiceData.customerEmail;
            document.getElementById('invoiceCustomerPhone').textContent = invoiceData.customerPhone;
            document.getElementById('invoiceNumber').textContent = invoiceData.invoiceNumber;
            document.getElementById('invoiceDate').textContent = invoiceData.date;
            document.getElementById('invoiceDueDate').textContent = invoiceData.dueDate;
            document.getElementById('serviceAmount').textContent = parseInt(invoiceData.amount).toLocaleString() + '.00';
            document.getElementById('depositAmount').textContent = invoiceData.deposit.toLocaleString() + '.00';
            document.getElementById('totalDue').textContent = invoiceData.deposit.toLocaleString() + '.00';
            document.getElementById('paymentAmount').textContent = invoiceData.deposit.toLocaleString() + '.00';
            
            // Store invoice data
            window.currentInvoice = invoiceData;
            
            // Show payment modal
            document.getElementById('paymentModal').classList.add('active');
        }

        function selectPaymentMethod(method) {
            // Clear previous selections
            document.querySelectorAll('.payment-method').forEach(el => el.classList.remove('selected'));
            event.target.closest('.payment-method').classList.add('selected');
            
            // Show/hide relevant options
            if (method === 'bank') {
                document.getElementById('bankList').classList.add('active');
                document.getElementById('paymentDetails').style.display = 'none';
            } else if (method === 'transfer') {
                document.getElementById('bankList').classList.remove('active');
                document.getElementById('paymentDetails').style.display = 'block';
            } else {
                showNotification('This payment method will be available soon!', 'info');
            }
        }

        function processPayment(bank) {
            showNotification(`Redirecting to ${bank} online banking...`, 'info');
            
            setTimeout(() => {
                showNotification('Payment simulation successful!', 'success');
                generateReceipt();
            }, 2000);
        }

        function confirmPayment() {
            const paymentProof = document.getElementById('paymentProof').files[0];
            
            if (!paymentProof) {
                showNotification('Please upload payment proof.', 'error');
                return;
            }
            
            showNotification('Processing payment...', 'info');
            
            setTimeout(() => {
                showNotification('Payment confirmed!', 'success');
                generateReceipt();
            }, 2000);
        }

        function generateReceipt() {
            const invoice = window.currentInvoice;
            
            // Update receipt details
            document.getElementById('receiptCustomerName').textContent = invoice.customerName;
            document.getElementById('receiptCustomerEmail').textContent = invoice.customerEmail;
            document.getElementById('receiptNumber').textContent = 'RCP-' + new Date().getFullYear() + '-' + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            document.getElementById('receiptDate').textContent = new Date().toLocaleDateString();
            document.getElementById('receiptPaymentMethod').textContent = document.querySelector('.payment-method.selected')?.querySelector('p').textContent || 'Bank Transfer';
            document.getElementById('receiptAmount').textContent = invoice.deposit.toLocaleString() + '.00';
            
            // Close payment modal and show receipt
            closeModal('paymentModal');
            document.getElementById('receiptModal').classList.add('active');
            
            // Send confirmation message
            setTimeout(() => {
                addChatMessage('Thank you for your payment! Our team will contact you within 24 hours to schedule a site visit.', 'bot');
            }, 1000);
        }

        function downloadReceipt() {
            showNotification('Receipt downloaded successfully!', 'success');
            // In a real implementation, this would generate a PDF
        }

        // Notification System
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icons = {
                success: '✓',
                error: '✗',
                info: 'ℹ'
            };
            
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${icons[type]}</span>
                    <span>${message}</span>
                </div>
                <span class="notification-close" onclick="closeNotification(this)">×</span>
            `;
            
            container.appendChild(notification);
            
            // Show notification
            setTimeout(() => notification.classList.add('show'), 100);
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }

        function closeNotification(element) {
            const notification = element.parentElement;
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }

        // Chat System
        let chatOpen = false;

        function toggleChat() {
            chatOpen = !chatOpen;
            document.getElementById('chatWindow').classList.toggle('active', chatOpen);
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            // Simulate bot response
            setTimeout(() => {
                const responses = [
                    'Thank you for your message! How can I assist you?',
                    'I understand. Let me help you with that.',
                    'Our team is here to help. What specific information do you need?',
                    'Great question! Our services include maintenance, renovation, and interior design.'
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addChatMessage(randomResponse, 'bot');
            }, 1000);
        }

        function addChatMessage(message, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            messageDiv.style.cssText = `
                background: ${sender === 'user' ? 'var(--gradient-pink)' : 'var(--bg-light)'};
                color: ${sender === 'user' ? 'white' : 'var(--text-dark)'};
                padding: 1rem;
                border-radius: 10px;
                margin-bottom: 1rem;
                margin-left: ${sender === 'user' ? '20%' : '0'};
                margin-right: ${sender === 'user' ? '0' : '20%'};
            `;
            
            messageDiv.innerHTML = `<p>${message}</p>`;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        // Portfolio Filter
        function filterPortfolio(category) {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            loadPortfolioItems(category);
        }
            const steps = document.querySelectorAll('.form-step');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            if (currentStep < steps.length) {
                steps[currentStep - 1].classList.remove('active');
                progressSteps[currentStep - 1].classList.add('completed');
                currentStep++;
                steps[currentStep - 1].classList.add('active');
                progressSteps[currentStep - 1].classList.add('active');
            }
        }

        function previousStep() {
            const steps = document.querySelectorAll('.form-step');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            if (currentStep > 1) {
                steps[currentStep - 1].classList.remove('active');
                progressSteps[currentStep - 1].classList.remove('active');
                currentStep--;
                steps[currentStep - 1].classList.add('active');
                progressSteps[currentStep - 1].classList.remove('completed');
            }
        }

        function selectOption(element, type) {
            const options = element.parentElement.querySelectorAll('.option-card');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
        }

        function generateBudget() {
            // Calculate budget based on selections
            nextStep();
        }

        function proceedToPayment() {
            alert('Redirecting to payment gateway for 30% deposit...');
            // Implement payment gateway integration
        }

        // Portfolio Filter
        function filterPortfolio(category) {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            loadPortfolioItems(category);
        }

        function openPortfolioManager() {
            document.getElementById('portfolioManager').classList.add('active');
            loadPortfolioManager();
            setupPortfolioUploadZone();
        }

        function closePortfolioManager() {
            document.getElementById('portfolioManager').classList.remove('active');
        }

        function switchPortfolioTab(category) {
            currentPortfolioCategory = category;
            const tabs = document.querySelectorAll('.portfolio-tab');
            tabs.forEach(tab => {
                tab.classList.toggle('active', tab.textContent.toLowerCase().includes(category) || (category === 'all' && tab.textContent === 'All Projects'));
            });
            loadPortfolioManager();
        }

        function setupPortfolioUploadZone() {
            const uploadZone = document.getElementById('portfolioUploadZone');
            const fileInput = document.getElementById('portfolioBatchUpload');

            uploadZone.onclick = () => fileInput.click();

            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.classList.add('dragging');
            });

            uploadZone.addEventListener('dragleave', () => {
                uploadZone.classList.remove('dragging');
            });

            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragging');
                handleBatchUpload(e.dataTransfer.files);
            });

            fileInput.addEventListener('change', (e) => {
                handleBatchUpload(e.target.files);
            });
        }

        function handleBatchUpload(files) {
            const batchContainer = document.getElementById('batchUploadContainer');
            const progressContainer = document.getElementById('batchUploadProgress');
            
            batchContainer.classList.add('active');
            progressContainer.innerHTML = '';

            const validTypes = [
                'image/jpeg', 'image/png', 'image/gif', 'image/webp',
                'video/mp4', 'video/quicktime', 'video/webm'
            ];

            Array.from(files).forEach((file, index) => {
                if (!validTypes.includes(file.type)) {
                    alert(`Unsupported file type: ${file.name}`);
                    return;
                }

                const progressItem = document.createElement('div');
                progressItem.className = 'upload-item-progress';
                progressItem.innerHTML = `
                    <div class="upload-item-info">
                        <span class="upload-item-name">${file.name}</span>
                        <span class="upload-item-status">0%</span>
                    </div>
                    <div class="upload-item-progress-bar">
                        <div class="upload-item-progress-fill" style="width: 0%"></div>
                    </div>
                `;
                progressContainer.appendChild(progressItem);

                // Simulate upload progress
                simulateUpload(progressItem, file, index);
            });
        }

        function simulateUpload(progressItem, file, index) {
            const progressFill = progressItem.querySelector('.upload-item-progress-fill');
            const statusText = progressItem.querySelector('.upload-item-status');
            let progress = 0;

            const interval = setInterval(() => {
                progress += Math.random() * 30;
                if (progress > 100) progress = 100;

                progressFill.style.width = progress + '%';
                statusText.textContent = Math.round(progress) + '%';

                if (progress === 100) {
                    clearInterval(interval);
                    statusText.textContent = 'Complete';
                    
                    // Process the uploaded file
                    processUploadedFile(file);
                    
                    // Hide batch container after all uploads
                    setTimeout(() => {
                        const allComplete = Array.from(document.querySelectorAll('.upload-item-status'))
                            .every(status => status.textContent === 'Complete');
                        if (allComplete) {
                            document.getElementById('batchUploadContainer').classList.remove('active');
                            loadPortfolioManager();
                        }
                    }, 1000);
                }
            }, 200);
        }

        function processUploadedFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const project = {
                    id: Date.now() + Math.random(),
                    title: file.name.split('.')[0].replace(/[-_]/g, ' '),
                    description: '',
                    category: currentPortfolioCategory === 'all' ? 'commercial' : currentPortfolioCategory,
                    media: [{
                        id: Date.now(),
                        type: file.type,
                        url: e.target.result,
                        name: file.name,
                        isAnimation: file.type === 'image/gif' || file.type === 'video/webm'
                    }],
                    createdAt: new Date().toISOString()
                };

                // Initialize category if not exists
                if (!portfolioProjects[project.category]) {
                    portfolioProjects[project.category] = [];
                }

                portfolioProjects[project.category].push(project);
                
                // Update main portfolio display
                if (!uploadedFiles.portfolio[project.category]) {
                    uploadedFiles.portfolio[project.category] = [];
                }
                uploadedFiles.portfolio[project.category].push({
                    ...project,
                    url: project.media[0].url,
                    type: project.media[0].type
                });
            };
            reader.readAsDataURL(file);
        }

        function loadPortfolioManager() {
            const grid = document.getElementById('portfolioItemsGrid');
            grid.innerHTML = '';

            let itemsToShow = [];

            if (currentPortfolioCategory === 'all') {
                Object.keys(portfolioProjects).forEach(category => {
                    itemsToShow = itemsToShow.concat(portfolioProjects[category] || []);
                });
            } else {
                itemsToShow = portfolioProjects[currentPortfolioCategory] || [];
            }

            // Add existing uploaded items
            if (uploadedFiles.portfolio[currentPortfolioCategory]) {
                uploadedFiles.portfolio[currentPortfolioCategory].forEach(item => {
                    if (!itemsToShow.find(p => p.id === item.id)) {
                        itemsToShow.push({
                            ...item,
                            media: [{
                                type: item.type,
                                url: item.url,
                                name: item.name || item.title
                            }]
                        });
                    }
                });
            }

            itemsToShow.forEach(project => {
                const item = createPortfolioEditItem(project);
                grid.appendChild(item);
            });

            if (itemsToShow.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: var(--text-light); grid-column: 1/-1;">No projects in this category yet. Upload some files to get started!</p>';
            }
        }

        function createPortfolioEditItem(project) {
            const item = document.createElement('div');
            item.className = 'portfolio-edit-item';

            const mainMedia = project.media[0];
            const mediaType = getMediaType(mainMedia.type);
            const typeIcon = getTypeIcon(mediaType);

            let mediaHTML = '';
            if (mainMedia.type.startsWith('image/')) {
                mediaHTML = `<img src="${mainMedia.url}" alt="${project.title}">`;
            } else if (mainMedia.type.startsWith('video/')) {
                mediaHTML = `<video src="${mainMedia.url}" muted></video>`;
            }

            if (mainMedia.isAnimation) {
                mediaHTML += '<div class="animation-badge">Animated</div>';
            }

            if (project.media.length > 1) {
                mediaHTML += `<div class="portfolio-type-badge"><span class="media-type-icon">🎞️</span> ${project.media.length} items</div>`;
            } else {
                mediaHTML += `<div class="portfolio-type-badge"><span class="media-type-icon">${typeIcon}</span> ${mediaType}</div>`;
            }

            item.innerHTML = `
                ${mediaHTML}
                <div class="portfolio-item-info">
                    <h4>${project.title}</h4>
                    <p style="font-size: 0.9rem; color: var(--text-light);">${project.category}</p>
                    <div class="portfolio-item-actions">
                        <button class="edit-btn" onclick="editPortfolioItem('${project.id}')">Edit</button>
                        <button class="delete-btn" onclick="deletePortfolioItem('${project.id}', '${project.category}')">Delete</button>
                    </div>
                </div>
            `;

            return item;
        }

        function getMediaType(mimeType) {
            if (mimeType.startsWith('image/')) return 'Image';
            if (mimeType.startsWith('video/')) return 'Video';
            return 'Media';
        }

        function getTypeIcon(type) {
            switch(type) {
                case 'Image': return '🖼️';
                case 'Video': return '🎬';
                default: return '📁';
            }
        }

        function editPortfolioItem(projectId) {
            let project = null;
            let category = null;

            // Find the project
            Object.keys(portfolioProjects).forEach(cat => {
                const found = portfolioProjects[cat].find(p => p.id == projectId);
                if (found) {
                    project = found;
                    category = cat;
                }
            });

            if (!project) {
                // Check uploaded files
                Object.keys(uploadedFiles.portfolio).forEach(cat => {
                    const found = uploadedFiles.portfolio[cat].find(p => p.id == projectId);
                    if (found) {
                        project = {
                            ...found,
                            media: [{
                                type: found.type,
                                url: found.url,
                                name: found.name || found.title
                            }]
                        };
                        category = cat;
                    }
                });
            }

            if (!project) return;

            currentEditingItem = { project, category };
            
            // Populate edit form
            document.getElementById('editItemTitle').value = project.title || '';
            document.getElementById('editItemDescription').value = project.description || '';
            document.getElementById('editItemCategory').value = category;
            
            // Populate media reorder list
            const reorderList = document.getElementById('mediaReorderList');
            reorderList.innerHTML = '';
            
            project.media.forEach((media, index) => {
                const li = createReorderItem(media, index);
                reorderList.appendChild(li);
            });

            setupDragAndDropReorder();
            document.getElementById('editPortfolioModal').classList.add('active');
        }

        function createReorderItem(media, index) {
            const li = document.createElement('li');
            li.className = 'media-reorder-item';
            li.draggable = true;
            li.dataset.index = index;

            let mediaPreview = '';
            if (media.type.startsWith('image/')) {
                mediaPreview = `<img src="${media.url}" alt="${media.name}">`;
            } else if (media.type.startsWith('video/')) {
                mediaPreview = `<video src="${media.url}"></video>`;
            }

            li.innerHTML = `
                <span class="drag-handle">☰</span>
                <div class="media-thumb">${mediaPreview}</div>
                <div style="flex: 1;">
                    <div>${media.name}</div>
                    <div style="font-size: 0.8rem; color: var(--text-light);">${getMediaType(media.type)}</div>
                </div>
                <button class="delete-btn" style="padding: 0.3rem 0.8rem;" onclick="removeMediaFromItem(${index})">Remove</button>
            `;

            return li;
        }

        function setupDragAndDropReorder() {
            const items = document.querySelectorAll('.media-reorder-item');
            let draggedItem = null;

            items.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedItem = item;
                    item.classList.add('dragging');
                });

                item.addEventListener('dragend', () => {
                    item.classList.remove('dragging');
                });

                item.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    const afterElement = getDragAfterElement(item.parentElement, e.clientY);
                    if (afterElement == null) {
                        item.parentElement.appendChild(draggedItem);
                    } else {
                        item.parentElement.insertBefore(draggedItem, afterElement);
                    }
                });
            });
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.media-reorder-item:not(.dragging)')];

            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;

                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function removeMediaFromItem(index) {
            if (currentEditingItem && currentEditingItem.project.media.length > 1) {
                currentEditingItem.project.media.splice(index, 1);
                editPortfolioItem(currentEditingItem.project.id);
            } else {
                alert('Cannot remove the last media item. Delete the project instead.');
            }
        }

        function savePortfolioItem() {
            if (!currentEditingItem) return;

            const title = document.getElementById('editItemTitle').value;
            const description = document.getElementById('editItemDescription').value;
            const newCategory = document.getElementById('editItemCategory').value;

            // Update project
            currentEditingItem.project.title = title;
            currentEditingItem.project.description = description;

            // Reorder media based on list
            const reorderedMedia = [];
            document.querySelectorAll('.media-reorder-item').forEach(item => {
                const index = parseInt(item.dataset.index);
                reorderedMedia.push(currentEditingItem.project.media[index]);
            });
            currentEditingItem.project.media = reorderedMedia;

            // Handle category change
            if (newCategory !== currentEditingItem.category) {
                // Remove from old category
                const oldIndex = portfolioProjects[currentEditingItem.category].findIndex(p => p.id === currentEditingItem.project.id);
                if (oldIndex > -1) {
                    portfolioProjects[currentEditingItem.category].splice(oldIndex, 1);
                }

                // Add to new category
                if (!portfolioProjects[newCategory]) {
                    portfolioProjects[newCategory] = [];
                }
                portfolioProjects[newCategory].push(currentEditingItem.project);
            }

            closeEditModal();
            loadPortfolioManager();
            loadPortfolioItems('all'); // Refresh main portfolio
        }

        function deletePortfolioItem(projectId, category) {
            if (confirm('Are you sure you want to delete this project?')) {
                // Remove from portfolioProjects
                if (portfolioProjects[category]) {
                    portfolioProjects[category] = portfolioProjects[category].filter(p => p.id != projectId);
                }

                // Remove from uploadedFiles
                if (uploadedFiles.portfolio[category]) {
                    uploadedFiles.portfolio[category] = uploadedFiles.portfolio[category].filter(p => p.id != projectId);
                }

                loadPortfolioManager();
                loadPortfolioItems('all'); // Refresh main portfolio
            }
        }

        function closeEditModal() {
            document.getElementById('editPortfolioModal').classList.remove('active');
            currentEditingItem = null;
        }

        // Add more media to existing project
        document.getElementById('addMoreMedia').addEventListener('change', function(e) {
            if (!currentEditingItem) return;

            Array.from(e.target.files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(event) {
                    currentEditingItem.project.media.push({
                        id: Date.now() + Math.random(),
                        type: file.type,
                        url: event.target.result,
                        name: file.name,
                        isAnimation: file.type === 'image/gif' || file.type === 'video/webm'
                    });
                    editPortfolioItem(currentEditingItem.project.id);
                };
                reader.readAsDataURL(file);
            });
        });

        // Load Portfolio Items with enhanced media support
        function loadPortfolioItems(category = 'all') {
            const portfolioGrid = document.getElementById('portfolioGrid');
            portfolioGrid.innerHTML = '';
            
            // Default portfolio items
            const defaultItems = [
                { category: 'commercial', title: 'Cath Kidston Store', image: '🛍️' },
                { category: 'commercial', title: 'Pie Face Restaurant', image: '🍕' },
                { category: 'commercial', title: 'Tusan Ice Cream', image: '🍦' },
                { category: 'commercial', title: 'Bungkus Kaw Kaw', image: '🥡' },
                { category: 'residential', title: 'Modern Apartment', image: '🏠' },
                { category: 'residential', title: 'Luxury Condo', image: '🏢' },
                { category: 'maintenance', title: 'Topshop Maintenance', image: '🔧' },
                { category: '3d', title: '3D Kitchen Design', image: '🎨' }
            ];

            // Combine all items
            let allItems = [...defaultItems];
            
            // Add portfolio projects
            Object.keys(portfolioProjects).forEach(cat => {
                portfolioProjects[cat].forEach(project => {
                    allItems.push({
                        ...project,
                        isProject: true
                    });
                });
            });

            // Add uploaded items that aren't projects
            Object.keys(uploadedFiles.portfolio).forEach(cat => {
                uploadedFiles.portfolio[cat].forEach(item => {
                    if (!portfolioProjects[cat] || !portfolioProjects[cat].find(p => p.id === item.id)) {
                        allItems.push({
                            category: cat,
                            title: item.title,
                            media: [{
                                type: item.type,
                                url: item.url,
                                name: item.name || item.title
                            }]
                        });
                    }
                });
            });
            
            allItems
                .filter(item => category === 'all' || item.category === category)
                .forEach((item, index) => {
                    const portfolioItem = document.createElement('div');
                    portfolioItem.className = 'portfolio-item';
                    
                    if (item.media && item.media.length > 0) {
                        // Multi-media project
                        if (item.media.length > 1) {
                            // Create a slider for multiple media
                            portfolioItem.innerHTML = createPortfolioSlider(item, index);
                        } else {
                            // Single media item
                            const media = item.media[0];
                            if (media.type.startsWith('image/')) {
                                portfolioItem.innerHTML = `
                                    <img src="${media.url}" alt="${item.title}">
                                    ${media.isAnimation ? '<div class="animation-badge">Animated</div>' : ''}
                                    <div class="portfolio-overlay" onclick="openPortfolioLightbox('${item.id || index}')">
                                        <div class="portfolio-info">
                                            <h4>${item.title}</h4>
                                            <p>${item.category.charAt(0).toUpperCase() + item.category.slice(1)} Project</p>
                                        </div>
                                    </div>
                                `;
                            } else if (media.type.startsWith('video/')) {
                                portfolioItem.innerHTML = `
                                    <video src="${media.url}" muted loop onmouseover="this.play()" onmouseout="this.pause()"></video>
                                    <div class="portfolio-overlay" onclick="openPortfolioLightbox('${item.id || index}')">
                                        <div class="portfolio-info">
                                            <h4>${item.title}</h4>
                                            <p>${item.category.charAt(0).toUpperCase() + item.category.slice(1)} Project</p>
                                        </div>
                                        <div class="gallery-play-btn">▶</div>
                                    </div>
                                `;
                            }
                        }
                    } else {
                        // Default placeholder
                        portfolioItem.innerHTML = `
                            <div style="height: 250px; background: var(--gradient-pink); display: flex; align-items: center; justify-content: center; font-size: 5rem;">
                                ${item.image}
                            </div>
                            <div class="portfolio-overlay">
                                <div class="portfolio-info">
                                    <h4>${item.title}</h4>
                                    <p>${item.category.charAt(0).toUpperCase() + item.category.slice(1)} Project</p>
                                </div>
                            </div>
                        `;
                    }
                    
                    portfolioGrid.appendChild(portfolioItem);
                });

            // Store items for lightbox
            window.portfolioItemsData = allItems.filter(item => category === 'all' || item.category === category);
        }

        function createPortfolioSlider(item, index) {
            const sliderId = `portfolio-slider-${item.id || index}`;
            let slideHTML = '<div class="portfolio-slide-gallery" style="height: 250px;">';
            slideHTML += `<div class="portfolio-slides" id="${sliderId}">`;
            
            item.media.forEach((media, i) => {
                slideHTML += '<div class="portfolio-slide">';
                if (media.type.startsWith('image/')) {
                    slideHTML += `<img src="${media.url}" alt="${item.title}">`;
                } else if (media.type.startsWith('video/')) {
                    slideHTML += `<video src="${media.url}" muted loop></video>`;
                }
                slideHTML += '</div>';
            });
            
            slideHTML += '</div>';
            slideHTML += `
                <button class="slider-nav prev" onclick="changePortfolioSlide('${sliderId}', -1)">‹</button>
                <button class="slider-nav next" onclick="changePortfolioSlide('${sliderId}', 1)">›</button>
            `;
            slideHTML += '</div>';
            slideHTML += `
                <div class="portfolio-overlay" onclick="openPortfolioLightbox('${item.id || index}')">
                    <div class="portfolio-info">
                        <h4>${item.title}</h4>
                        <p>${item.category.charAt(0).toUpperCase() + item.category.slice(1)} Project</p>
                        <p style="font-size: 0.8rem; opacity: 0.8;">${item.media.length} items</p>
                    </div>
                </div>
            `;
            
            // Initialize slider after DOM update
            setTimeout(() => initPortfolioSlider(sliderId), 100);
            
            return slideHTML;
        }

        let portfolioSliderPositions = {};

        function initPortfolioSlider(sliderId) {
            portfolioSliderPositions[sliderId] = 0;
        }

        function changePortfolioSlide(sliderId, direction) {
            event.stopPropagation();
            const slider = document.getElementById(sliderId);
            const slides = slider.querySelectorAll('.portfolio-slide');
            const total = slides.length;
            
            portfolioSliderPositions[sliderId] = (portfolioSliderPositions[sliderId] + direction + total) % total;
            slider.style.transform = `translateX(-${portfolioSliderPositions[sliderId] * 100}%)`;
        }

        function openPortfolioLightbox(itemId) {
            const item = window.portfolioItemsData.find(i => i.id == itemId) || window.portfolioItemsData[itemId];
            if (!item || !item.media) return;

            const lightbox = document.getElementById('lightbox');
            const content = document.getElementById('lightboxContent');
            
            if (item.media.length > 1) {
                // Create a slider in lightbox
                let slideHTML = '<div class="portfolio-slide-gallery" style="height: 80vh; width: 80vw; max-width: 1200px;">';
                slideHTML += '<div class="portfolio-slides" id="lightbox-slider">';
                
                item.media.forEach(media => {
                    slideHTML += '<div class="portfolio-slide">';
                    if (media.type.startsWith('image/')) {
                        slideHTML += `<img src="${media.url}" alt="${item.title}" style="object-fit: contain;">`;
                    } else if (media.type.startsWith('video/')) {
                        slideHTML += `<video src="${media.url}" controls style="object-fit: contain;"></video>`;
                    }
                    slideHTML += '</div>';
                });
                
                slideHTML += '</div>';
                slideHTML += '<button class="slider-nav prev" onclick="changeLightboxSlide(-1)">‹</button>';
                slideHTML += '<button class="slider-nav next" onclick="changeLightboxSlide(1)">›</button>';
                slideHTML += '<div class="portfolio-thumbnails">';
                
                item.media.forEach((media, i) => {
                    slideHTML += `<div class="portfolio-thumbnail ${i === 0 ? 'active' : ''}" onclick="goToLightboxSlide(${i})">`;
                    if (media.type.startsWith('image/')) {
                        slideHTML += `<img src="${media.url}" alt="">`;
                    } else if (media.type.startsWith('video/')) {
                        slideHTML += `<video src="${media.url}"></video>`;
                    }
                    slideHTML += '</div>';
                });
                
                slideHTML += '</div></div>';
                content.innerHTML = slideHTML;
                
                window.lightboxSliderPosition = 0;
            } else {
                // Single media
                const media = item.media[0];
                if (media.type.startsWith('image/')) {
                    content.innerHTML = `<img src="${media.url}" alt="${item.title}">`;
                } else if (media.type.startsWith('video/')) {
                    content.innerHTML = `<video src="${media.url}" controls autoplay></video>`;
                }
            }
            
            lightbox.classList.add('active');
        }

        function changeLightboxSlide(direction) {
            event.stopPropagation();
            const slider = document.getElementById('lightbox-slider');
            const slides = slider.querySelectorAll('.portfolio-slide');
            const thumbnails = document.querySelectorAll('.portfolio-thumbnail');
            const total = slides.length;
            
            window.lightboxSliderPosition = (window.lightboxSliderPosition + direction + total) % total;
            slider.style.transform = `translateX(-${window.lightboxSliderPosition * 100}%)`;
            
            thumbnails.forEach((thumb, i) => {
                thumb.classList.toggle('active', i === window.lightboxSliderPosition);
            });
        }

        function goToLightboxSlide(index) {
            event.stopPropagation();
            window.lightboxSliderPosition = index;
            const slider = document.getElementById('lightbox-slider');
            slider.style.transform = `translateX(-${index * 100}%)`;
            
            document.querySelectorAll('.portfolio-thumbnail').forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });
        }

        // Drag and Drop
        function setupDragAndDrop() {
            const uploadAreas = document.querySelectorAll('.upload-area');
            
            uploadAreas.forEach(area => {
                area.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    area.classList.add('dragging');
                });
                
                area.addEventListener('dragleave', () => {
                    area.classList.remove('dragging');
                });
                
                area.addEventListener('drop', (e) => {
                    e.preventDefault();
                    area.classList.remove('dragging');
                    
                    const files = e.dataTransfer.files;
                    const input = area.querySelector('input[type="file"]');
                    input.files = files;
                    
                    const event = new Event('change', { bubbles: true });
                    input.dispatchEvent(event);
                });
            });
        }

        // Auto-play slider
        function autoPlaySliders() {
            setInterval(() => {
                if (uploadedFiles.hero.length > 1) {
                    changeSlide('hero', 1);
                }
            }, 5000);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            loadPortfolioItems();
            setupDragAndDrop();
            autoPlaySliders();
            
            // Initialize portfolio projects storage
            if (!window.portfolioProjects) {
                window.portfolioProjects = {};
            }
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });

            // Prevent lightbox content click from closing
            const lightboxContent = document.getElementById('lightboxContent');
            if (lightboxContent) {
                lightboxContent.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            }

            // Make service cards interactive
            document.querySelectorAll('.service-card').forEach(card => {
                card.addEventListener('click', function() {
                    const serviceName = this.querySelector('h4').textContent;
                    showNotification(`Learn more about ${serviceName}`, 'info');
                    
                    // Scroll to quote section
                    document.querySelector('#quote').scrollIntoView({ behavior: 'smooth' });
                });
            });

            // Add floating animation to chat button
            const chatButton = document.querySelector('.chat-button');
            if (chatButton) {
                setInterval(() => {
                    chatButton.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        chatButton.style.transform = 'scale(1)';
                    }, 500);
                }, 5000);
            }

            // Initialize first-time visitor message
            // Note: localStorage not supported in Claude.ai - using alternative approach
            setTimeout(() => {
                showNotification('Welcome to REFIT! Check out our portfolio and get a free quote!', 'info');
            }, 2000);
        });

        // File upload handler for quote section
        const quoteFileInput = document.getElementById('fileInput');
        if (quoteFileInput) {
            quoteFileInput.addEventListener('change', function(e) {
                handleFileUpload(e, 'quote');
            });
        }

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all sections
        document.querySelectorAll('section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'all 0.6s ease';
            observer.observe(section);
        });
    </script>
</body>
</html>
